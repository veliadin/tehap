{"ast":null,"code":"var _jsxFileName = \"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\src\\\\pages\\\\UserSignupPage.js\";\nimport React, { useState } from 'react';\nimport Input from '../components/Input';\nimport { useTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/ButtonWithProgress';\nimport { useApiProgress } from '../shared/ApiProgress';\nimport { useDispatch } from 'react-redux';\nimport { signupHandler } from '../redux/authActions';\nimport '../css/style.css';\n\nconst UserSignupPage = props => {\n  const dispatch = useDispatch();\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    passwordRepeat: null\n  });\n  const [errors, setErrors] = useState({});\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setErrors(previousError => ({ ...previousError,\n      [name]: undefined\n    }));\n    setForm(previousForm => {\n      return { ...previousForm,\n        [name]: value\n      };\n    });\n  };\n\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      history\n    } = props; //signuphandler\n\n    const {\n      push\n    } = history; //signup handler\n\n    const {\n      username,\n      displayName,\n      password\n    } = form;\n    const body = {\n      username,\n      displayName,\n      password\n    };\n\n    try {\n      const response = await dispatch(signupHandler(body));\n      push('/login');\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    username: usernameError,\n    displayName: displayNameError,\n    password: passwordError,\n    passwordRepeat\n  } = errors;\n  const pendingApiCall = useApiProgress('post', '/api/createuser');\n  let passwordRepeatError;\n\n  if (form.password !== form.passwordRepeat) {\n    passwordRepeatError = t('Password mismatch');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card0 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, t('Sign Up')), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card3 card border-0 px-4 py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row mb-4 px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    label: t('Username'),\n    error: usernameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"displayName\",\n    label: t('Display Name'),\n    error: displayNameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    label: t('Password'),\n    error: passwordError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"passwordRepeat\",\n    label: t('Password Repeat'),\n    error: passwordRepeatError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 41\n    }\n  })))), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickSignup,\n    disabled: pendingApiCall || passwordRepeatError !== undefined,\n    pendingApiCall: pendingApiCall,\n    text: t('Sign Up'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default UserSignupPage;","map":{"version":3,"sources":["D:/JsProjects/Tehap_FrontEnd/Tehap_FrontEnd/src/pages/UserSignupPage.js"],"names":["React","useState","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","signupHandler","UserSignupPage","props","dispatch","form","setForm","username","displayName","password","passwordRepeat","errors","setErrors","onChange","event","name","value","target","previousError","undefined","previousForm","onClickSignup","preventDefault","history","push","body","response","error","data","validationErrors","t","usernameError","displayNameError","passwordError","pendingApiCall","passwordRepeatError"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/Input'\r\nimport { useTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/ButtonWithProgress';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\nimport '../css/style.css';\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        passwordRepeat: null,\r\n    })\r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setErrors((previousError) => ({ ...previousError, [name]: undefined }));\r\n\r\n        setForm((previousForm) => {\r\n            return {\r\n                ...previousForm,\r\n                [name]: value\r\n            }\r\n        });\r\n    };\r\n\r\n    const onClickSignup = async event => {\r\n        event.preventDefault();\r\n\r\n        const { history } = props; //signuphandler\r\n        const { push } = history; //signup handler\r\n        const { username, displayName, password } = form;\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password\r\n        }\r\n\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                setErrors(error.response.data.validationErrors);\r\n            }\r\n        }\r\n\r\n    };\r\n    const { t } = useTranslation();\r\n    const { username: usernameError, displayName: displayNameError, password: passwordError, passwordRepeat } = errors;\r\n    const pendingApiCall = useApiProgress('post', '/api/createuser');\r\n\r\n    let passwordRepeatError;\r\n    if (form.password !== form.passwordRepeat) {\r\n        passwordRepeatError = t('Password mismatch');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\">\r\n            <div className=\"card card0 border-0\">\r\n                <div class=\"row d-flex\">\r\n\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n\r\n                    <div class=\"col-lg-8\">\r\n                        <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                        <div class=\"card3 card border-0 px-4 py-5\">\r\n                            <div class=\"row mb-4 px-3\">\r\n                                <form>\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <Input name=\"username\" label={t('Username')} error={usernameError} onChange={onChange} />\r\n                                        <Input name=\"displayName\" label={t('Display Name')} error={displayNameError} onChange={onChange} />\r\n                                        <Input name=\"password\" label={t('Password')} error={passwordError} onChange={onChange} type=\"password\" />\r\n                                        <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeatError} onChange={onChange} type=\"password\" />\r\n\r\n\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            <ButtonWithProgress\r\n                                onClick={onClickSignup}\r\n                                disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n                                pendingApiCall={pendingApiCall}\r\n                                text={t('Sign Up')} />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UserSignupPage;\r\n"]},"metadata":{},"sourceType":"module"}