{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\FrontEnd Projects\\\\AppStater_v01\\\\src\\\\pages\\\\UserSignupPage.js\";\nimport React, { useState } from 'react';\nimport Input from '../components/input';\nimport { withTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/buttonWithProgres';\nimport { withApiProgress } from '../shared/ApiProgress';\nimport { connect } from 'react-redux';\nimport { signupHandler } from '../redux/authActions';\n\nconst UserSignupPage = props => {\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    passwordRepeat: null\n  });\n  const [errors, setErrors] = useState({});\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setErrors(previousError => ({ ...previousError,\n      [name]: undefined\n    }));\n    setForm(previousForm => {\n      return { ...previousForm,\n        [name]: value\n      };\n    });\n  };\n\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      history,\n      dispatch\n    } = props; //signuphandler\n\n    const {\n      push\n    } = history; //signup handler\n\n    const {\n      username,\n      displayName,\n      password\n    } = form;\n    const body = {\n      username,\n      displayName,\n      password\n    };\n\n    try {\n      const response = await dispatch(signupHandler(body));\n      push('/login');\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n\n  const {\n    username: usernameError,\n    displayName: displayNameError,\n    password: passwordError,\n    passwordRepeat\n  } = errors;\n  const {\n    t,\n    pendingApiCall\n  } = props;\n  let passwordRepeatError;\n\n  if (form.password !== form.passwordRepeat) {\n    passwordRepeatError = t('Password mismatch');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, t('Sign Up')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    label: t('Username'),\n    error: usernameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"displayName\",\n    label: t('Display Name'),\n    error: displayNameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    label: t('Password'),\n    error: passwordError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"passwordRepeat\",\n    label: t('Password Repeat'),\n    error: passwordRepeatError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickSignup,\n    disabled: pendingApiCall || passwordRepeatError !== undefined,\n    pendingApiCall: pendingApiCall,\n    text: t('Sign Up'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage, '/api/createuser');\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPageWithApiProgress);\nexport default connect()(UserSignupPageWithTranslation);","map":{"version":3,"sources":["C:/Users/adinv/FrontEnd Projects/AppStater_v01/src/pages/UserSignupPage.js"],"names":["React","useState","Input","withTranslation","ButtonWithProgress","withApiProgress","connect","signupHandler","UserSignupPage","props","form","setForm","username","displayName","password","passwordRepeat","errors","setErrors","onChange","event","name","value","target","previousError","undefined","previousForm","onClickSignup","preventDefault","history","dispatch","push","body","response","error","data","validationErrors","usernameError","displayNameError","passwordError","t","pendingApiCall","passwordRepeatError","UserSignupPageWithApiProgress","UserSignupPageWithTranslation"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/input'\r\nimport { withTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/buttonWithProgres';\r\nimport { withApiProgress } from '../shared/ApiProgress';\r\nimport { connect } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\n\r\n\r\nconst UserSignupPage = (props) => {\r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        passwordRepeat: null,\r\n    })\r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setErrors((previousError) => ({...previousError, [name] :undefined})); \r\n        \r\n        setForm((previousForm) => {\r\n            return {\r\n                ...previousForm,\r\n                [name]: value\r\n            }\r\n        });\r\n    };\r\n\r\n    const onClickSignup = async event => {\r\n        event.preventDefault();\r\n\r\n        const { history, dispatch } = props; //signuphandler\r\n        const { push } = history; //signup handler\r\n        const { username, displayName, password } = form;\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password\r\n        }\r\n\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                setErrors(error.response.data.validationErrors);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    const { username: usernameError, displayName: displayNameError, password: passwordError, passwordRepeat } = errors;\r\n    const { t, pendingApiCall } = props;\r\n\r\n\r\n    let passwordRepeatError;\r\n    if (form.password !== form.passwordRepeat) {\r\n        passwordRepeatError = t('Password mismatch');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <form>\r\n                <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                <div className=\"form-group\">\r\n                    <Input name=\"username\" label={t('Username')} error={usernameError} onChange={onChange} />\r\n                    <Input name=\"displayName\" label={t('Display Name')} error={displayNameError} onChange={onChange} />\r\n                    <Input name=\"password\" label={t('Password')} error={passwordError} onChange={onChange} type=\"password\" />\r\n                    <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeatError} onChange={onChange} type=\"password\" />\r\n                    <ButtonWithProgress\r\n                        onClick={onClickSignup}\r\n                        disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n                        pendingApiCall={pendingApiCall}\r\n                        text={t('Sign Up')} />\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage, '/api/createuser');\r\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPageWithApiProgress);\r\nexport default connect()(UserSignupPageWithTranslation);\r\n"]},"metadata":{},"sourceType":"module"}