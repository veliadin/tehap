{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\Documents\\\\GitHub\\\\tehap\\\\Tehap_FrontEnd\\\\src\\\\components\\\\ProfileCard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ProfileImageWithDefault from './ProfileImageWithDefault';\nimport { useTranslation } from \"react-i18next\";\nimport Input from \"../components/Input\";\nimport { deleteUser, updateUser, getFollowersCount, follow, unfollow, getFollowingCount, getTheUserFollow } from \"../api/apiCalls\";\nimport { useApiProgress } from \"../shared/ApiProgress\";\nimport ButtonWithProgress from '../components/ButtonWithProgress';\nimport { logoutSucces, updateSuccess } from '../redux/authActions';\nimport Activities from \"./Activities\";\nimport Modal from './Modal';\n\nconst ProfileCard = props => {\n  const {\n    username: loggedInUsername\n  } = useSelector(store => {\n    return {\n      username: store.username\n    };\n  });\n  const [inEditMode, setInEditMode] = useState(false);\n  const [updatedDisplayName, setUpdatedDisplayName] = useState();\n  const [user, setUser] = useState({});\n  const [editable, setEditable] = useState(false);\n  const [newImage, setNewImage] = useState();\n  const [validationErrors, setValidationErrors] = useState({});\n  const [modalVisible, setModalVisible] = useState(false);\n  const history = useHistory();\n  const [updateEmail, setUpdateEmail] = useState();\n  const [updateUniversity, setUpdateUniversity] = useState();\n  const [updateBranch, setUpdateBranch] = useState();\n  const [showFollow, setShowFollow] = useState(false);\n  const [followersCount, setFollowersCount] = useState();\n  const [followingCount, setFollowingCount] = useState();\n  const dispatch = useDispatch();\n  const routeParams = useParams();\n  const pathUsername = routeParams.username;\n  useEffect(() => {\n    setUser(props.user);\n    setFollowersCount(getUserFollowersCount().data);\n    setFollowingCount(getUserFollowingCount().data);\n    setShowFollow(getUserTheUserFollow().data);\n  }, [props.user]);\n  useEffect(() => {\n    setEditable(pathUsername === loggedInUsername);\n  }, [pathUsername, loggedInUsername]);\n  useEffect(() => {\n    setFollowersCount(getUserFollowersCount().data);\n    setFollowingCount(getUserFollowingCount().data);\n  }, [showFollow]);\n  const {\n    username,\n    displayName,\n    image,\n    branch,\n    usersurname,\n    email,\n    university\n  } = user;\n  const pendingApiCallDeleteUser = useApiProgress('delete', `/api/users/delete/${username}`, true);\n  const {\n    t\n  } = useTranslation();\n  useEffect(() => {\n    if (!inEditMode) {\n      setUpdatedDisplayName(undefined);\n      setNewImage(undefined);\n      setUpdateBranch(undefined);\n      setUpdateEmail(undefined);\n      setUpdateUniversity(undefined);\n    } else {\n      setUpdatedDisplayName(displayName);\n      setUpdateBranch(branch);\n      setUpdateEmail(email);\n      setUpdateUniversity(university);\n    }\n  }, [inEditMode, displayName, branch, email, university]);\n  useEffect(() => {\n    setValidationErrors(previousValidationErrors => {\n      return { ...previousValidationErrors,\n        displayName: undefined\n      };\n    });\n  }, [updatedDisplayName]);\n  useEffect(() => {\n    setValidationErrors(previousValidationErrors => {\n      return { ...previousValidationErrors,\n        image: undefined\n      };\n    });\n  }, [newImage]);\n\n  const onClickEdit = async () => {\n    let image;\n\n    if (newImage) {\n      image = newImage.split(',')[1];\n    }\n\n    const body = {\n      displayName: updatedDisplayName,\n      email: updateEmail,\n      university: updateUniversity,\n      branch: updateBranch,\n      image\n    };\n\n    try {\n      const response = await updateUser(username, body);\n      setInEditMode(false);\n      setUser(response.data);\n      dispatch(updateSuccess(response.data));\n    } catch (error) {\n      setValidationErrors(error.response.data.validationErrors);\n    }\n  };\n\n  const getUserFollowersCount = async () => {\n    const response = await getFollowersCount(pathUsername);\n    setFollowersCount(response.data);\n  };\n\n  const getUserFollowingCount = async () => {\n    const response = await getFollowingCount(pathUsername);\n    setFollowingCount(response.data);\n  };\n\n  const getUserTheUserFollow = async () => {\n    const response = await getTheUserFollow(routeParams.username);\n    setShowFollow(response.data);\n  };\n\n  const onClickFollow = async () => {\n    const response = await follow(pathUsername);\n    getUserTheUserFollow();\n  };\n\n  const onClickUnfollow = async () => {\n    const response = await unfollow(pathUsername);\n    getUserTheUserFollow();\n  };\n\n  const onChangeFile = event => {\n    if (event.target.files.length < 1) {\n      return;\n    }\n\n    const file = event.target.files[0];\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      setNewImage(fileReader.result);\n    };\n\n    fileReader.readAsDataURL(file);\n  };\n\n  const onClickCancel = () => {\n    setModalVisible(false);\n  };\n\n  const onClickDeleteUser = async () => {\n    await deleteUser(username);\n    setModalVisible(false);\n    dispatch(logoutSucces());\n    history.push('/');\n  };\n\n  let message = \"We cannot edit\";\n\n  if (pathUsername === loggedInUsername) {\n    message = \"We can edit\";\n  }\n\n  const pendingApiCall = useApiProgress('put', '/api/users/' + username);\n  const {\n    displayName: displayNameError,\n    image: imageError\n  } = validationErrors;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gutters-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column align-items-center text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ProfileImageWithDefault, {\n    className: \"rounded-circle shadow\",\n    width: \"150\",\n    height: \"160\",\n    alt: `${username} profile`,\n    image: image,\n    temimage: newImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }, !inEditMode && /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 23\n    }\n  }, displayName), editable && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success  d-inline-flex\",\n    onClick: () => setInEditMode(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 27\n    }\n  }, \"edit\"), t('Edit')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger d-inline-flex\",\n    onClick: () => setModalVisible(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 29\n    }\n  }, \"person_remove\"), t('Delete My Account')))), inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: t('Change Display Name'),\n    defaultValue: displayName,\n    onChange: event => {\n      setUpdatedDisplayName(event.target.value);\n    },\n    error: displayNameError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    type: \"file\",\n    onChange: onChangeFile,\n    error: imageError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    className: \"btn btn-primary d-inline-flex\",\n    onClick: onClickEdit,\n    disabled: pendingApiCall,\n    pendingApiCall: pendingApiCall,\n    text: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 33\n      }\n    }, \"save\"), t('Save')),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-light d-inline-flex ml-1\",\n    onClick: () => setInEditMode(false),\n    disabled: pendingApiCall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 29\n    }\n  }, \"close\"), t('Cancel')))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-secondary mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 56\n    }\n  }, branch)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-secondary mb-1 col-sm col-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 23\n    }\n  }, t('Followers'), \":\", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 89\n    }\n  }, followersCount)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-secondary mb-1 col-sm col-md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 23\n    }\n  }, t('Following'), \":\", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 89\n    }\n  }, followingCount))), !showFollow && loggedInUsername !== username && loggedInUsername && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: () => onClickFollow(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 23\n    }\n  }, t('Follow')), showFollow && loggedInUsername !== username && loggedInUsername && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    onClick: () => onClickUnfollow(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 23\n    }\n  }, t('Unfollow'))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-3 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }, t('Name and Surname'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }\n  }, username + \" \" + usersurname)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 21\n    }\n  }, t('Email'))), !inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 21\n    }\n  }, email), inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    defaultValue: email,\n    onChange: event => {\n      setUpdateEmail(event.target.value);\n    },\n    style: {\n      height: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 21\n    }\n  }, t('University'))), !inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 21\n    }\n  }, university), inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    defaultValue: university,\n    onChange: event => {\n      setUpdateUniversity(event.target.value);\n    },\n    style: {\n      height: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 21\n    }\n  }, t('Branch'))), !inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-9 text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 21\n    }\n  }, branch), inEditMode && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    defaultValue: branch,\n    onChange: event => {\n      setUpdateBranch(event.target.value);\n    },\n    style: {\n      height: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 23\n    }\n  }))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 mb-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 15\n    }\n  }, t('Events to Attend')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Activities, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 21\n    }\n  })))))))), /*#__PURE__*/React.createElement(Modal, {\n    visible: modalVisible,\n    onClickCancel: onClickCancel,\n    onClickOk: onClickDeleteUser,\n    title: t('Delete My Account'),\n    okButtonText: t('Delete My Account'),\n    pendingApiCall: pendingApiCallDeleteUser,\n    message: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 13\n      }\n    }, t('Are you sure to delete your account?'))) //pendingApiCall={pendingApiCall}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default ProfileCard;","map":{"version":3,"sources":["C:/Users/adinv/Documents/GitHub/tehap/Tehap_FrontEnd/src/components/ProfileCard.js"],"names":["React","useEffect","useState","useHistory","useParams","useSelector","useDispatch","ProfileImageWithDefault","useTranslation","Input","deleteUser","updateUser","getFollowersCount","follow","unfollow","getFollowingCount","getTheUserFollow","useApiProgress","ButtonWithProgress","logoutSucces","updateSuccess","Activities","Modal","ProfileCard","props","username","loggedInUsername","store","inEditMode","setInEditMode","updatedDisplayName","setUpdatedDisplayName","user","setUser","editable","setEditable","newImage","setNewImage","validationErrors","setValidationErrors","modalVisible","setModalVisible","history","updateEmail","setUpdateEmail","updateUniversity","setUpdateUniversity","updateBranch","setUpdateBranch","showFollow","setShowFollow","followersCount","setFollowersCount","followingCount","setFollowingCount","dispatch","routeParams","pathUsername","getUserFollowersCount","data","getUserFollowingCount","getUserTheUserFollow","displayName","image","branch","usersurname","email","university","pendingApiCallDeleteUser","t","undefined","previousValidationErrors","onClickEdit","split","body","response","error","onClickFollow","onClickUnfollow","onChangeFile","event","target","files","length","file","fileReader","FileReader","onloadend","result","readAsDataURL","onClickCancel","onClickDeleteUser","push","message","pendingApiCall","displayNameError","imageError","value","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport ProfileImageWithDefault from './ProfileImageWithDefault';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Input from \"../components/Input\";\r\nimport { deleteUser, updateUser, getFollowersCount, follow, unfollow, getFollowingCount, getTheUserFollow } from \"../api/apiCalls\";\r\nimport { useApiProgress } from \"../shared/ApiProgress\";\r\nimport ButtonWithProgress from '../components/ButtonWithProgress';\r\nimport { logoutSucces, updateSuccess } from '../redux/authActions'\r\nimport Activities from \"./Activities\";\r\nimport Modal from './Modal';\r\n\r\n\r\nconst ProfileCard = (props) => {\r\n  const { username: loggedInUsername } = useSelector((store) => {\r\n    return {\r\n      username: store.username,\r\n    };\r\n  });\r\n  const [inEditMode, setInEditMode] = useState(false);\r\n  const [updatedDisplayName, setUpdatedDisplayName] = useState();\r\n  const [user, setUser] = useState({});\r\n  const [editable, setEditable] = useState(false);\r\n  const [newImage, setNewImage] = useState();\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const history = useHistory();\r\n  const [updateEmail, setUpdateEmail] = useState();\r\n  const [updateUniversity, setUpdateUniversity] = useState();\r\n  const [updateBranch, setUpdateBranch] = useState();\r\n  const [showFollow, setShowFollow] = useState(false);\r\n  const [followersCount, setFollowersCount] = useState();\r\n  const [followingCount, setFollowingCount] = useState();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const routeParams = useParams();\r\n  const pathUsername = routeParams.username;\r\n\r\n  useEffect(() => {\r\n    setUser(props.user);\r\n    setFollowersCount(getUserFollowersCount().data);\r\n    setFollowingCount(getUserFollowingCount().data);\r\n    setShowFollow(getUserTheUserFollow().data);\r\n  }, [props.user])\r\n\r\n  useEffect(() => {\r\n    setEditable(pathUsername === loggedInUsername)\r\n  }, [pathUsername, loggedInUsername])\r\n\r\n  useEffect(() => {\r\n    setFollowersCount(getUserFollowersCount().data);\r\n    setFollowingCount(getUserFollowingCount().data);\r\n  }, [showFollow])\r\n\r\n  const { username, displayName, image, branch, usersurname, email, university } = user;\r\n\r\n  const pendingApiCallDeleteUser = useApiProgress('delete', `/api/users/delete/${username}`, true);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    if (!inEditMode) {\r\n      setUpdatedDisplayName(undefined);\r\n      setNewImage(undefined);\r\n      setUpdateBranch(undefined);\r\n      setUpdateEmail(undefined);\r\n      setUpdateUniversity(undefined);\r\n    } else {\r\n      setUpdatedDisplayName(displayName);\r\n      setUpdateBranch(branch);\r\n      setUpdateEmail(email);\r\n      setUpdateUniversity(university);\r\n    }\r\n  }, [inEditMode, displayName, branch, email, university]);\r\n\r\n  useEffect(() => {\r\n    setValidationErrors((previousValidationErrors) => {\r\n      return {\r\n        ...previousValidationErrors,\r\n        displayName: undefined\r\n      }\r\n    });\r\n  }, [updatedDisplayName])\r\n\r\n  useEffect(() => {\r\n    setValidationErrors((previousValidationErrors) => {\r\n      return {\r\n        ...previousValidationErrors,\r\n        image: undefined\r\n      }\r\n    });\r\n  }, [newImage])\r\n\r\n  const onClickEdit = async () => {\r\n    let image;\r\n    if (newImage) {\r\n      image = newImage.split(',')[1];\r\n    }\r\n    const body = {\r\n      displayName: updatedDisplayName,\r\n      email: updateEmail,\r\n      university: updateUniversity,\r\n      branch: updateBranch,\r\n      image\r\n    };\r\n    try {\r\n      const response = await updateUser(username, body);\r\n      setInEditMode(false);\r\n      setUser(response.data)\r\n      dispatch(updateSuccess(response.data));\r\n    } catch (error) {\r\n      setValidationErrors(error.response.data.validationErrors);\r\n    }\r\n  }\r\n\r\n  const getUserFollowersCount = async () => {\r\n    const response = await getFollowersCount(pathUsername);\r\n    setFollowersCount(response.data);\r\n  }\r\n\r\n  const getUserFollowingCount = async () => {\r\n    const response = await getFollowingCount(pathUsername);\r\n    setFollowingCount(response.data);\r\n  }\r\n\r\n  const getUserTheUserFollow = async () => {\r\n    const response = await getTheUserFollow(routeParams.username);\r\n    setShowFollow(response.data);\r\n\r\n  }\r\n\r\n  const onClickFollow = async () => {\r\n    const response = await follow(pathUsername);\r\n    getUserTheUserFollow();\r\n  }\r\n\r\n  const onClickUnfollow = async () => {\r\n    const response = await unfollow(pathUsername);\r\n    getUserTheUserFollow();\r\n  }\r\n\r\n  const onChangeFile = (event) => {\r\n    if (event.target.files.length < 1) {\r\n      return;\r\n    }\r\n    const file = event.target.files[0];\r\n    const fileReader = new FileReader();\r\n    fileReader.onloadend = () => {\r\n      setNewImage(fileReader.result);\r\n    }\r\n    fileReader.readAsDataURL(file);\r\n  }\r\n\r\n  const onClickCancel = () => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const onClickDeleteUser = async () => {\r\n    await deleteUser(username);\r\n    setModalVisible(false);\r\n    dispatch(logoutSucces());\r\n    history.push('/');\r\n  }\r\n\r\n  let message = \"We cannot edit\";\r\n  if (pathUsername === loggedInUsername) {\r\n    message = \"We can edit\";\r\n  }\r\n  const pendingApiCall = useApiProgress('put', '/api/users/' + username);\r\n\r\n  const { displayName: displayNameError, image: imageError } = validationErrors;\r\n  return (\r\n\r\n    <div className=\"container\">\r\n      <br></br>\r\n      <div className=\"main-body\">\r\n        <div className=\"row gutters-sm\">\r\n          <div className=\"col-md-4 mb-3\">\r\n            <div className=\"card border-0\">\r\n              <div className=\"card-body\" >\r\n                <div className=\"d-flex flex-column align-items-center text-center\">\r\n                  <ProfileImageWithDefault\r\n                    className=\"rounded-circle shadow\"\r\n                    width=\"150\"\r\n                    height=\"160\"\r\n                    alt={`${username} profile`}\r\n                    image={image}\r\n                    temimage={newImage}\r\n                  />\r\n\r\n\r\n\r\n                  <div className=\"mt-3\">\r\n                    {(!inEditMode &&\r\n                      <h4>{displayName}</h4>)}\r\n\r\n                    {editable && (\r\n                      <>\r\n                        <button\r\n                          className=\"btn btn-success  d-inline-flex\"\r\n                          onClick={() => setInEditMode(true)}>\r\n                          <span className=\"material-icons\">edit</span>\r\n                          {t('Edit')}\r\n                        </button>\r\n                        <div className=\"pt-2\">\r\n                          <button\r\n                            className=\"btn btn-danger d-inline-flex\"\r\n                            onClick={() => setModalVisible(true)}>\r\n                            <span className=\"material-icons\">person_remove</span>\r\n                            {t('Delete My Account')}\r\n                          </button>\r\n                        </div>\r\n\r\n                      </>\r\n                    )}\r\n\r\n\r\n                    {(inEditMode && (\r\n                      <div>\r\n                        <Input\r\n                          label={t('Change Display Name')}\r\n                          defaultValue={displayName}\r\n                          onChange={(event) => {\r\n                            setUpdatedDisplayName(event.target.value)\r\n                          }}\r\n                          error={displayNameError}\r\n                        />\r\n                        <Input type=\"file\" onChange={onChangeFile} error={imageError} />\r\n                        <div>\r\n                          <ButtonWithProgress\r\n                            className=\"btn btn-primary d-inline-flex\"\r\n                            onClick={onClickEdit}\r\n                            disabled={pendingApiCall}\r\n                            pendingApiCall={pendingApiCall}\r\n                            text={\r\n                              <>\r\n                                <i className=\"material-icons\">save</i>\r\n                                {t('Save')}\r\n                              </>\r\n                            }\r\n                          />\r\n                          <button\r\n                            className=\"btn btn-light d-inline-flex ml-1\"\r\n                            onClick={() => setInEditMode(false)}\r\n                            disabled={pendingApiCall}>\r\n                            <i className=\"material-icons\">close</i>\r\n                            {t('Cancel')}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    <br></br><br></br>\r\n                    <p className=\"text-secondary mb-1\"><strong>{branch}</strong></p>\r\n                    <div className=\"row\" >\r\n                      <p className=\"text-secondary mb-1 col-sm col-md\">{t('Followers')}:<strong>{followersCount}</strong></p>\r\n\r\n                      <p className=\"text-secondary mb-1 col-sm col-md\">{t('Following')}:<strong>{followingCount}</strong></p>\r\n\r\n                    </div>\r\n                    {(!showFollow && loggedInUsername !== username && loggedInUsername && (\r\n                      <button className=\"btn btn-primary\" onClick={() => onClickFollow()} >{t('Follow')}</button>\r\n                    ))}\r\n                    {(showFollow && loggedInUsername !== username && loggedInUsername && (\r\n                      <button className=\"btn btn-danger\" onClick={() => onClickUnfollow()} >{t('Unfollow')}</button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <div className=\"col-md-8\">\r\n            <div className=\"card mb-3 border-0\">\r\n              <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-3\">\r\n                    <h6 className=\"mb-0\">{t('Name and Surname')}</h6>\r\n\r\n\r\n                  </div>\r\n                  <div className=\"col-sm-9 text-secondary\">\r\n                    {username + \" \" + usersurname}\r\n                  </div>\r\n\r\n                </div>\r\n                <hr></hr>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-3\">\r\n                    <h6 className=\"mb-0\">{t('Email')}</h6>\r\n                  </div>\r\n                  {(!inEditMode && (\r\n                    <div className=\"col-sm-9 text-secondary\">\r\n                      {email}\r\n                    </div>\r\n                  ))}\r\n                  {(inEditMode && (\r\n                    <div>\r\n                      <input\r\n                        defaultValue={email}\r\n                        onChange={(event) => {\r\n                          setUpdateEmail(event.target.value)\r\n                        }}\r\n                        style={{ height: 25 }}\r\n                      />\r\n                    </div>\r\n\r\n                  ))}\r\n                </div>\r\n                <hr></hr>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-3\">\r\n                    <h6 className=\"mb-0\">{t('University')}</h6>\r\n                  </div>\r\n                  {(!inEditMode && (\r\n                    <div className=\"col-sm-9 text-secondary\">\r\n                      {university}\r\n                    </div>\r\n                  ))}\r\n                  {(inEditMode && (\r\n                    <div>\r\n                      <input\r\n                        defaultValue={university}\r\n                        onChange={(event) => {\r\n                          setUpdateUniversity(event.target.value)\r\n                        }}\r\n                        style={{ height: 25 }}\r\n                      />\r\n                    </div>\r\n\r\n                  ))}\r\n                </div>\r\n                <hr></hr>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-3\">\r\n                    <h6 className=\"mb-0\">{t('Branch')}</h6>\r\n                  </div>\r\n                  {(!inEditMode && (\r\n                    <div className=\"col-sm-9 text-secondary\">\r\n                      {branch}\r\n                    </div>\r\n                  ))}\r\n                  {(inEditMode && (\r\n                    <div>\r\n                      <input\r\n                        defaultValue={branch}\r\n                        onChange={(event) => {\r\n                          setUpdateBranch(event.target.value)\r\n                        }}\r\n                        style={{ height: 25 }}\r\n                      />\r\n                    </div>\r\n\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <br></br>\r\n            <div className=\"col-sm-12 mb-12\">\r\n              <h4 className=\"card-title\">{t('Events to Attend')}</h4>\r\n              <div className=\"card h-100 border-0\">\r\n                <div className=\"card-body\">\r\n                  <div className=\"col-12\">\r\n                    <Activities />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Modal visible={modalVisible}\r\n        onClickCancel={onClickCancel}\r\n        onClickOk={onClickDeleteUser}\r\n        title={t('Delete My Account')}\r\n        okButtonText={t('Delete My Account')}\r\n        pendingApiCall={pendingApiCallDeleteUser}\r\n        message=\r\n        {\r\n          <>{\r\n            <strong>\r\n              {t('Are you sure to delete your account?')}\r\n            </strong>\r\n          }\r\n          </>\r\n        }\r\n      //pendingApiCall={pendingApiCall}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileCard;\r\n"]},"metadata":{},"sourceType":"module"}