{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import ProfileImageWithDefault from'../components/ProfileImageWithDefault';import{Link}from'react-router-dom';import{format}from'timeago.js';import{useTranslation}from'react-i18next';import{useSelector}from'react-redux';import{deleteActivity}from'../api/apiCalls';import Modal from'./Modal';import{useState}from'react';import{useApiProgress}from'../shared/ApiProgress';var ActivityView=function ActivityView(props){var loggedInUser=useSelector(function(store){return store.username;});var activity=props.activity,onDeleteActivity=props.onDeleteActivity;var user=activity.user,content=activity.content,timestamp=activity.timestamp,fileAttachmentViewModel=activity.fileAttachmentViewModel,id=activity.id;var username=user.username,image=user.image;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVisible=_useState2[0],setModalVisible=_useState2[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useTranslation2=useTranslation(),i18n=_useTranslation2.i18n;var formatted=format(timestamp,i18n.language);var ownedByLoggedInUser=loggedInUser===username;var pendingApiCall=useApiProgress('delete',\"/api/deleteActivity/\".concat(id),true);var onClickDeleteActivity=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return deleteActivity(id);case 2:onDeleteActivity(id);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onClickDeleteActivity(){return _ref.apply(this,arguments);};}();var onClickCancel=function onClickCancel(){setModalVisible(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row no-gutters d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},fileAttachmentViewModel&&/*#__PURE__*/React.createElement(\"div\",null,fileAttachmentViewModel.fileType.startsWith('image')&&/*#__PURE__*/React.createElement(\"img\",{className:\"img-fluid\",src:'images/attachments/'+fileAttachmentViewModel.name,alt:content}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},\" \",activity.id,\" - \",activity.title),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},activity.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"h6\",null,t('Location'),\" : \"+activity.location)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"h6\",null,t('When'),\" : \"+activity.activityHour,\":\"+activity.activityMinute))),ownedByLoggedInUser&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-delete-link m-auto\",style:{marginLeft:50},onClick:function onClick(){return setModalVisible(true);}},/*#__PURE__*/React.createElement(\"span\",{className:\"material-icons\"},\"delete_outline\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-footer text-muted d-flex\"},/*#__PURE__*/React.createElement(ProfileImageWithDefault,{image:image,width:\"32\",height:\"32\",className:\"rounded-circle m-1\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"flex-fill m-auto pl-2\"},formatted,\" tarihinde \",/*#__PURE__*/React.createElement(Link,{to:\"/user/\".concat(username),className:\"text-dark\"},username),\" taraf\\u0131ndan olu\\u015Fturuldu.\"))),/*#__PURE__*/React.createElement(Modal,{visible:modalVisible,onClickCancel:onClickCancel,onClickOk:onClickDeleteActivity,title:t('Delete Activity'),message:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,t('Are you sure to delete activity?'))),activity.title),pendingApiCall:pendingApiCall,okButtonText:t('Delete Activity')}));};export default ActivityView;","map":{"version":3,"sources":["D:/JsProjects/Tehap_FrontEnd/Tehap_FrontEnd/src/components/ActivityView.js"],"names":["React","ProfileImageWithDefault","Link","format","useTranslation","useSelector","deleteActivity","Modal","useState","useApiProgress","ActivityView","props","loggedInUser","store","username","activity","onDeleteActivity","user","content","timestamp","fileAttachmentViewModel","id","image","modalVisible","setModalVisible","t","i18n","formatted","language","ownedByLoggedInUser","pendingApiCall","onClickDeleteActivity","onClickCancel","fileType","startsWith","name","title","description","location","activityHour","activityMinute","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ProfileImageWithDefault from '../components/ProfileImageWithDefault';\r\nimport { Link } from 'react-router-dom';\r\nimport { format } from 'timeago.js'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport { deleteActivity } from '../api/apiCalls';\r\nimport Modal from './Modal';\r\nimport { useState } from 'react';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\n\r\nconst ActivityView = (props) => {\r\n    const loggedInUser = useSelector(store => store.username);\r\n    const { activity, onDeleteActivity } = props;\r\n    const { user, content, timestamp, fileAttachmentViewModel, id } = activity;\r\n    const { username, image } = user;\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const { t } = useTranslation();\r\n    const { i18n } = useTranslation();\r\n\r\n    const formatted = format(timestamp, i18n.language);\r\n\r\n    const ownedByLoggedInUser = loggedInUser === username;\r\n\r\n    const pendingApiCall = useApiProgress('delete', `/api/deleteActivity/${id}`, true);\r\n\r\n    const onClickDeleteActivity = async () => {\r\n        await deleteActivity(id);\r\n        onDeleteActivity(id);\r\n    };\r\n    const onClickCancel = () => {\r\n        setModalVisible(false);\r\n    };\r\n    return (\r\n        <>\r\n            <div className=\"card mb-3\">\r\n                <div className=\"row no-gutters d-flex\">\r\n                    <div className=\"col-md-3\">\r\n                        {fileAttachmentViewModel && (\r\n                            <div>\r\n                                {fileAttachmentViewModel.fileType.startsWith('image') && (\r\n                                    <img className=\"img-fluid\" src={'images/attachments/' + fileAttachmentViewModel.name} alt={content} />\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"card-body\">\r\n                            <h4 className=\"card-title\"> {activity.id} - {activity.title}</h4>\r\n                            <p className=\"card-text\">{activity.description}</p>\r\n                        </div>\r\n                        <div className=\"col-md-12\">\r\n                            <h6>{t('Location')}{\" : \" + activity.location}</h6>\r\n                        </div>\r\n                        <div className=\"col-md-12\">\r\n                            <h6>{t('When')}{\" : \" + activity.activityHour}{\":\" + activity.activityMinute}</h6>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {ownedByLoggedInUser && (<button\r\n                        className=\"btn btn-delete-link m-auto\"\r\n                        style={{ marginLeft: 50 }}\r\n                        onClick={() => setModalVisible(true)}\r\n                    >\r\n                        <span className=\"material-icons\">\r\n                            delete_outline\r\n                    </span>\r\n                    </button>)}\r\n                </div>\r\n                <div className=\"card-footer text-muted d-flex\">\r\n                    <ProfileImageWithDefault image={image} width=\"32\" height=\"32\" className=\"rounded-circle m-1\" />\r\n\r\n                    <p className=\"flex-fill m-auto pl-2\">\r\n                        {formatted} tarihinde <Link to={`/user/${username}`} className=\"text-dark\">\r\n                            {username}\r\n                        </Link> tarafından oluşturuldu.\r\n                </p>\r\n                </div>\r\n            </div>\r\n            <Modal visible={modalVisible}\r\n                onClickCancel={onClickCancel}\r\n                onClickOk={onClickDeleteActivity}\r\n                title={t('Delete Activity')}\r\n\r\n                message={\r\n                    <>\r\n                        <p><strong>{t('Are you sure to delete activity?')}</strong></p>\r\n                        {activity.title}\r\n                    </>\r\n                }\r\n                pendingApiCall={pendingApiCall}\r\n                okButtonText={t('Delete Activity')}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ActivityView;"]},"metadata":{},"sourceType":"module"}