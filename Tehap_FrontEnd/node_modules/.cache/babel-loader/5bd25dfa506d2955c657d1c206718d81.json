{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\FrontEnd Projects\\\\Tehap_FrontEnd\\\\src\\\\pages\\\\UserLoginPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport Input from '../components/input';\nimport { useTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/buttonWithProgres';\nimport { useApiProgress } from '../shared/ApiProgress';\nimport { useDispatch } from 'react-redux';\nimport { loginHandler, loginWithSocialHandler } from '../redux/authActions';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport '../css/style.css';\nimport { FaFacebook, FaGoogle } from \"react-icons/fa\";\nimport { Link } from 'react-router-dom';\n\nconst UserLoginPage = props => {\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  var form = {\n    providerId: null,\n    //response.googleId\n    username: null,\n    //response.profileObj.givenName\n    displayName: null,\n    // response.name\n    imageUrl: null,\n    //response.profileObj.imageUrl\n    email: null,\n    //response.profileObj.email\n    provider: null //response.tokenObj.idpId\n\n  };\n  const dispatch = useDispatch();\n  useEffect(() => {\n    // username veya password'da bir değişim olduğunda, errorlar undefined oluyor.\n    setError(undefined);\n  }, [username, password]);\n\n  const onClickLogin = async event => {\n    event.preventDefault();\n    const creds = {\n      username,\n      password\n    };\n    const {\n      history\n    } = props;\n    const {\n      push\n    } = history;\n    setError(undefined);\n\n    try {\n      await dispatch(loginHandler(creds));\n      push('/');\n    } catch (apiError) {\n      setError(apiError.response.data.message);\n    }\n  }; //Facebook Area S\n\n\n  const componentClicked = data => {\n    console.log(\"data\", data);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n\n    if (response.accessToken) {\n      const {\n        history\n      } = props;\n      const {\n        push\n      } = history;\n      setError(undefined);\n\n      try {\n        form = {\n          providerId: response.id,\n          //response.googleId\n          username: response.name,\n          //response.profileObj.givenName\n          displayName: response.name,\n          // response.name\n          imageUrl: response.picture.data.url,\n          //response.profileObj.imageUrl\n          email: response.email,\n          //response.profileObj.email\n          provider: response.graphDomain //response.tokenObj.idpId\n\n        };\n        console.log(form);\n        dispatch(loginWithSocialHandler(form));\n        push('/');\n      } catch (error) {\n        setError(\"Hata var\");\n      }\n    }\n  }; //Facebook Area F Google S\n\n\n  const responseGoogle = response => {\n    console.log(response);\n\n    if (response.accessToken) {\n      const {\n        history\n      } = props;\n      const {\n        push\n      } = history;\n      setError(undefined);\n\n      try {\n        form = {\n          providerId: response.googleId,\n          //response.googleId\n          username: response.profileObj.givenName,\n          //response.profileObj.givenName\n          displayName: response.profileObj.name,\n          // response.name\n          imageUrl: response.profileObj.imageUrl,\n          //response.profileObj.imageUrl\n          email: response.profileObj.email,\n          //response.profileObj.email\n          provider: response.tokenObj.idpId //response.tokenObj.idpId\n\n        };\n        console.log(form);\n        dispatch(loginWithSocialHandler(form));\n        push('/');\n      } catch (error) {\n        setError(\"Hata var\");\n      }\n    }\n  }; //Google F\n\n\n  const {\n    t\n  } = useTranslation();\n  const pendingApiCall = useApiProgress('/api/auth');\n  const buttonEnabled = username && password;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card card0 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card1 pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n    class: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 47\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row px-3 justify-content-center mt-4 mb-5 border-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"img\", {\n    class: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 99\n    }\n  }), \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card2 card border-0 px-4 py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row mb-4 px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"text-center mr-4\",\n    style: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: \"2978237078953063\",\n    fields: \"name,email,picture\",\n    onClick: componentClicked,\n    callback: responseFacebook,\n    cssClass: \"btnFacebook\",\n    icon: /*#__PURE__*/React.createElement(FaFacebook, {\n      color: \"white\",\n      size: \"1.4rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 47\n      }\n    }),\n    textButton: \"\\xA0\\xA0Sign In with Facebook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\",\n    buttonText: \"Login\",\n    onSuccess: responseGoogle,\n    onFailure: responseGoogle,\n    cookiePolicy: 'single_host_origin',\n    className: \"btnGoogle\",\n    buttonText: \"\\xA0\\xA0Sign In with Google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row px-3 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"small\", {\n    class: \"or text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 58\n    }\n  }, \"Or\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    label: t('Username'),\n    onChange: event => setUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: t('Password'),\n    type: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 39\n    }\n  }, error), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickLogin,\n    disabled: !buttonEnabled || pendingApiCall,\n    pendingApiCall: pendingApiCall,\n    text: t('Login'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row mb-4 px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"small\", {\n    class: \"font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 57\n    }\n  }, \"Don't have an account? \", /*#__PURE__*/React.createElement(\"a\", {\n    class: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 112\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 135\n    }\n  }, \"Register\"))), \" \"))))))\n  /*\r\n  <div className=\"container\">\r\n      <form>\r\n      //ÇÖP OLASI\r\n                      <div class=\"row mb-3 px-3\"> <button type=\"submit\" class=\"btn btn-blue text-center\">Login</button> </div>\r\n                       <div class=\"row px-3 mb-4\">\r\n                          <div class=\"custom-control custom-checkbox custom-control-inline\"> <input id=\"chk1\" type=\"checkbox\" name=\"chk\" class=\"custom-control-input\" /> <label for=\"chk1\" class=\"custom-control-label text-sm\">Remember me</label> </div> <a href=\"#\" class=\"ml-auto mb-0 text-sm\">Forgot Password?</a>\r\n                      </div>\r\n                        //ÇÖP\r\n          <h1 className=\"text-center\">{t('Login')}</h1>\r\n          <div className=\"form-label-group\">\r\n              <Input label={t('Username')} onChange={event => setUsername(event.target.value)} />\r\n              <Input label={t('Password')} type=\"password\" onChange={event => setPassword(event.target.value)} />\r\n              {error && <div className=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n              <ButtonWithProgress\r\n                  onClick={onClickLogin}\r\n                  disabled={!buttonEnabled || pendingApiCall}\r\n                  pendingApiCall={pendingApiCall}\r\n                  text={t('Login')} />\r\n              </div>\r\n          <FacebookLogin\r\n              appId=\"2978237078953063\"\r\n              fields=\"name,email,picture\"\r\n              onClick={componentClicked}\r\n              callback={responseFacebook}\r\n          />\r\n          <GoogleLogin\r\n              clientId=\"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\"\r\n              buttonText=\"Login\"\r\n              onSuccess={responseGoogle}\r\n              onFailure={responseGoogle}\r\n              cookiePolicy={'single_host_origin'}\r\n          />\r\n      </form>\r\n      </div>\r\n  */\n  ;\n};\n\nexport default UserLoginPage;","map":{"version":3,"sources":["C:/Users/adinv/FrontEnd Projects/Tehap_FrontEnd/src/pages/UserLoginPage.js"],"names":["React","useState","useEffect","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","loginHandler","loginWithSocialHandler","GoogleLogin","FacebookLogin","FaFacebook","FaGoogle","Link","UserLoginPage","props","username","setUsername","password","setPassword","error","setError","form","providerId","displayName","imageUrl","email","provider","dispatch","undefined","onClickLogin","event","preventDefault","creds","history","push","apiError","response","data","message","componentClicked","console","log","responseFacebook","accessToken","id","name","picture","url","graphDomain","responseGoogle","googleId","profileObj","givenName","tokenObj","idpId","t","pendingApiCall","buttonEnabled","display","flexWrap","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Input from '../components/input'\r\nimport { useTranslation } from 'react-i18next'\r\nimport ButtonWithProgress from '../components/buttonWithProgres';\r\nimport { useApiProgress } from '../shared/ApiProgress'\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginHandler, loginWithSocialHandler } from '../redux/authActions';\r\nimport GoogleLogin from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport '../css/style.css';\r\nimport { FaFacebook, FaGoogle } from \"react-icons/fa\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst UserLoginPage = (props) => {\r\n    const [username, setUsername] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n    var form = {\r\n        providerId: null, //response.googleId\r\n        username: null,//response.profileObj.givenName\r\n        displayName: null, // response.name\r\n        imageUrl: null, //response.profileObj.imageUrl\r\n        email: null,//response.profileObj.email\r\n        provider: null //response.tokenObj.idpId\r\n    };\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => { // username veya password'da bir değişim olduğunda, errorlar undefined oluyor.\r\n        setError(undefined);\r\n    }, [username, password])\r\n\r\n    const onClickLogin = async event => {\r\n        event.preventDefault();\r\n        const creds = {\r\n            username,\r\n            password\r\n        };\r\n        const { history } = props;\r\n        const { push } = history;\r\n\r\n        setError(undefined);\r\n        try {\r\n            await dispatch(loginHandler(creds));\r\n            push('/')\r\n        } catch (apiError) {\r\n            setError(apiError.response.data.message);\r\n        }\r\n    };\r\n    //Facebook Area S\r\n    const componentClicked = data => {\r\n        console.log(\"data\", data);\r\n    };\r\n\r\n    const responseFacebook = response => {\r\n        console.log(response);\r\n\r\n        if (response.accessToken) {\r\n            const { history } = props;\r\n            const { push } = history;\r\n            setError(undefined);\r\n            try {\r\n                form = {\r\n                    providerId: response.id, //response.googleId\r\n                    username: response.name,//response.profileObj.givenName\r\n                    displayName: response.name, // response.name\r\n                    imageUrl: response.picture.data.url, //response.profileObj.imageUrl\r\n                    email: response.email,//response.profileObj.email\r\n                    provider: response.graphDomain//response.tokenObj.idpId\r\n                };\r\n                console.log(form);\r\n                dispatch(loginWithSocialHandler(form));\r\n                push('/');\r\n            } catch (error) {\r\n                setError(\"Hata var\");\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n    };\r\n    //Facebook Area F Google S\r\n    const responseGoogle = (response) => {\r\n        console.log(response)\r\n\r\n        if (response.accessToken) {\r\n            const { history } = props;\r\n            const { push } = history;\r\n            setError(undefined);\r\n            try {\r\n\r\n                form = {\r\n                    providerId: response.googleId, //response.googleId\r\n                    username: response.profileObj.givenName,//response.profileObj.givenName\r\n                    displayName: response.profileObj.name, // response.name\r\n                    imageUrl: response.profileObj.imageUrl, //response.profileObj.imageUrl\r\n                    email: response.profileObj.email,//response.profileObj.email\r\n                    provider: response.tokenObj.idpId//response.tokenObj.idpId\r\n                };\r\n                console.log(form);\r\n                dispatch(loginWithSocialHandler(form));\r\n                push('/');\r\n            } catch (error) {\r\n                setError(\"Hata var\");\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    //Google F\r\n    const { t } = useTranslation();\r\n    const pendingApiCall = useApiProgress('/api/auth');\r\n    const buttonEnabled = username && password;\r\n    return (\r\n        <div class=\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\">\r\n            <div class=\"card card0 border-0\">\r\n                <div class=\"row d-flex\">\r\n                    <div class=\"col-lg-6\">\r\n                        <div class=\"card1 pb-5\">\r\n                            <div class=\"row\"> <img class=\"logo\" /> </div>\r\n                            <div class=\"row px-3 justify-content-center mt-4 mb-5 border-line\" /> <img class=\"image\" /> </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-lg-6\">\r\n                        <div class=\"card2 card border-0 px-4 py-5\">\r\n                            <div class=\"row mb-4 px-3\">\r\n                                <div class=\"text-center mr-4\" style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n\r\n                                    <FacebookLogin\r\n                                        appId=\"2978237078953063\"\r\n                                        fields=\"name,email,picture\"\r\n                                        onClick={componentClicked}\r\n                                        callback={responseFacebook}\r\n                                        cssClass=\"btnFacebook\"\r\n                                        icon={<FaFacebook color='white' size='1.4rem'></FaFacebook>}\r\n                                        textButton=\"&nbsp;&nbsp;Sign In with Facebook\"\r\n                                    />\r\n\r\n                                    <GoogleLogin\r\n                                        clientId=\"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\"\r\n                                        buttonText=\"Login\"\r\n                                        onSuccess={responseGoogle}\r\n                                        onFailure={responseGoogle}\r\n                                        cookiePolicy={'single_host_origin'}\r\n                                        className=\"btnGoogle\"\r\n                                        buttonText=\"&nbsp;&nbsp;Sign In with Google\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row px-3 mb-4\">\r\n                                <div class=\"line\"></div> <small class=\"or text-center\">Or</small>\r\n                                <div class=\"line\"></div>\r\n                            </div>\r\n                            <Input label={t('Username')} onChange={event => setUsername(event.target.value)} />\r\n                            <Input label={t('Password')} type=\"password\" onChange={event => setPassword(event.target.value)} />\r\n                            {error && <div className=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n\r\n                            <ButtonWithProgress\r\n                                onClick={onClickLogin}\r\n                                disabled={!buttonEnabled || pendingApiCall}\r\n                                pendingApiCall={pendingApiCall}\r\n                                text={t('Login')} />\r\n\r\n                            <div class=\"row mb-4 px-3\"> <small class=\"font-weight-bold\">Don't have an account? <a class=\"text-danger\"><Link to=\"/signup\">Register</Link></a></small> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div >\r\n        /*\r\n        <div className=\"container\">\r\n            <form>\r\n            //ÇÖP OLASI\r\n                            <div class=\"row mb-3 px-3\"> <button type=\"submit\" class=\"btn btn-blue text-center\">Login</button> </div>\r\n                             <div class=\"row px-3 mb-4\">\r\n                                <div class=\"custom-control custom-checkbox custom-control-inline\"> <input id=\"chk1\" type=\"checkbox\" name=\"chk\" class=\"custom-control-input\" /> <label for=\"chk1\" class=\"custom-control-label text-sm\">Remember me</label> </div> <a href=\"#\" class=\"ml-auto mb-0 text-sm\">Forgot Password?</a>\r\n                            </div>\r\n\r\n                            //ÇÖP\r\n                <h1 className=\"text-center\">{t('Login')}</h1>\r\n                <div className=\"form-label-group\">\r\n                    <Input label={t('Username')} onChange={event => setUsername(event.target.value)} />\r\n                    <Input label={t('Password')} type=\"password\" onChange={event => setPassword(event.target.value)} />\r\n                    {error && <div className=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n                    <ButtonWithProgress\r\n                        onClick={onClickLogin}\r\n                        disabled={!buttonEnabled || pendingApiCall}\r\n                        pendingApiCall={pendingApiCall}\r\n                        text={t('Login')} />\r\n\r\n\r\n                </div>\r\n                <FacebookLogin\r\n                    appId=\"2978237078953063\"\r\n                    fields=\"name,email,picture\"\r\n                    onClick={componentClicked}\r\n                    callback={responseFacebook}\r\n                />\r\n                <GoogleLogin\r\n                    clientId=\"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\"\r\n                    buttonText=\"Login\"\r\n                    onSuccess={responseGoogle}\r\n                    onFailure={responseGoogle}\r\n                    cookiePolicy={'single_host_origin'}\r\n                />\r\n            </form>\r\n\r\n\r\n        </div>\r\n        */\r\n    );\r\n}\r\n\r\n\r\nexport default UserLoginPage;"]},"metadata":{},"sourceType":"module"}