{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\Documents\\\\GitHub\\\\tehap\\\\Tehap_FrontEnd\\\\src\\\\pages\\\\UserSignupPage.js\";\nimport React, { useState } from 'react';\nimport Input from '../components/Input';\nimport { useTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/ButtonWithProgress';\nimport { useApiProgress } from '../shared/ApiProgress';\nimport { useDispatch } from 'react-redux';\nimport { signupHandler } from '../redux/authActions';\nimport '../css/style.css';\n\nconst UserSignupPage = props => {\n  const dispatch = useDispatch();\n  const [proImage, setProImage] = useState();\n  const [username, setUsername] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [password, setPassword] = useState();\n  const [email, setEmail] = useState();\n  const [userSurname, setUserSurname] = useState();\n  const [university, setUniversity] = useState();\n  const [branch, setBranch] = useState();\n  const [errors, setErrors] = useState({});\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setErrors(previousError => ({ ...previousError,\n      [name]: undefined\n    }));\n  };\n\n  const onChangeFile = event => {\n    if (event.target.files.length < 1) {\n      return;\n    }\n\n    console.log(event);\n    const file = event.target.files[0];\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      setProImage(fileReader.result);\n    };\n\n    fileReader.readAsDataURL(file);\n  };\n\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      history\n    } = props; //signuphandler\n\n    const {\n      push\n    } = history; //signup handler\n\n    const body = {\n      username,\n      displayName,\n      password,\n      email,\n      usersurname: userSurname,\n      university,\n      branch,\n      image: proImage\n    };\n\n    try {\n      const response = await dispatch(signupHandler(body));\n      push('/login');\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    username: usernameError,\n    displayName: displayNameError,\n    password: passwordError,\n    passwordRepeat,\n    usersurname: usersurnameError,\n    email: emailError,\n    university: universityError,\n    branch: branchError\n  } = errors;\n  const pendingApiCall = useApiProgress('post', '/api/createuser');\n  let passwordRepeatError;\n\n  if (form.password !== form.passwordRepeat) {\n    passwordRepeatError = t('Password mismatch');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card0 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, t('Sign Up')), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card2 card border-0 px-1 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"file\",\n    onChange: onChangeFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \" mb-4 px-3 col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    label: t('Username'),\n    error: usernameError,\n    onChange: event => setUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"userSurname\",\n    label: t('Surname'),\n    error: usersurnameError,\n    onChange: event => setUserSurname(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"displayName\",\n    label: t('Display Name'),\n    error: displayNameError,\n    onChange: event => setDisplayName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"email\",\n    label: t('Email'),\n    error: emailError,\n    onChange: event => setEmail(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 45\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \" mb-4 px-3 col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    label: t('Password'),\n    error: passwordError,\n    onChange: event => setPassword(event.target.value),\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"passwordRepeat\",\n    label: t('Password Repeat'),\n    error: passwordRepeatError,\n    onChange: event => setPasswordRepeat(event.target.value),\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"university\",\n    label: t('University'),\n    error: universityError,\n    onChange: event => setUniversity(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"branch\",\n    label: t('Branch'),\n    error: branchError,\n    onChange: event => setBranch(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 45\n    }\n  }))))), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickSignup,\n    disabled: pendingApiCall || passwordRepeatError !== undefined,\n    pendingApiCall: pendingApiCall,\n    text: t('Sign Up'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default UserSignupPage;","map":{"version":3,"sources":["C:/Users/adinv/Documents/GitHub/tehap/Tehap_FrontEnd/src/pages/UserSignupPage.js"],"names":["React","useState","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","signupHandler","UserSignupPage","props","dispatch","proImage","setProImage","username","setUsername","displayName","setDisplayName","password","setPassword","email","setEmail","userSurname","setUserSurname","university","setUniversity","branch","setBranch","errors","setErrors","onChange","event","name","value","target","previousError","undefined","onChangeFile","files","length","console","log","file","fileReader","FileReader","onloadend","result","readAsDataURL","onClickSignup","preventDefault","history","push","body","usersurname","image","response","error","data","validationErrors","t","usernameError","displayNameError","passwordError","passwordRepeat","usersurnameError","emailError","universityError","branchError","pendingApiCall","passwordRepeatError","form","setPasswordRepeat"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/Input'\r\nimport { useTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/ButtonWithProgress';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\nimport '../css/style.css';\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const [proImage, setProImage] = useState();\r\n    const [username, setUsername] = useState();\r\n    const [displayName, setDisplayName] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [email, setEmail] = useState();\r\n    const [userSurname, setUserSurname] = useState();\r\n    const [university, setUniversity] = useState();\r\n    const [branch, setBranch] = useState();\r\n\r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setErrors((previousError) => ({ ...previousError, [name]: undefined }));\r\n\r\n\r\n    };\r\n\r\n    const onChangeFile = (event) => {\r\n        if (event.target.files.length < 1) {\r\n            return;\r\n        }\r\n        console.log(event);\r\n        const file = event.target.files[0];\r\n        const fileReader = new FileReader();\r\n        fileReader.onloadend = () => {\r\n            setProImage(fileReader.result);\r\n        }\r\n        fileReader.readAsDataURL(file);\r\n    }\r\n\r\n    const onClickSignup = async event => {\r\n        event.preventDefault();\r\n        const { history } = props; //signuphandler\r\n        const { push } = history; //signup handler\r\n\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password,\r\n            email,\r\n            usersurname: userSurname,\r\n            university,\r\n            branch,\r\n            image: proImage\r\n        }\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                setErrors(error.response.data.validationErrors);\r\n            }\r\n        }\r\n    };\r\n    const { t } = useTranslation();\r\n    const { username: usernameError, displayName: displayNameError, password: passwordError, passwordRepeat, usersurname: usersurnameError, email: emailError, university: universityError, branch: branchError } = errors;\r\n    const pendingApiCall = useApiProgress('post', '/api/createuser');\r\n\r\n    let passwordRepeatError;\r\n    if (form.password !== form.passwordRepeat) {\r\n        passwordRepeatError = t('Password mismatch');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\">\r\n            <div className=\"card card0 border-0\">\r\n                <div class=\"row d-flex\">\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n                    <div class=\"col-lg-8\">\r\n                        <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                        <div class=\"card2 card border-0 px-1 py-3\">\r\n                            <Input type=\"file\" onChange={onChangeFile} />\r\n                            <div className=\"row\">\r\n                                <div class=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"username\" label={t('Username')} error={usernameError} onChange={(event) => setUsername(event.target.value)} />\r\n                                            <Input name=\"userSurname\" label={t('Surname')} error={usersurnameError} onChange={(event) => setUserSurname(event.target.value)} />\r\n                                            <Input name=\"displayName\" label={t('Display Name')} error={displayNameError} onChange={(event) => setDisplayName(event.target.value)} />\r\n                                            <Input name=\"email\" label={t('Email')} error={emailError} onChange={(event) => setEmail(event.target.value)} />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                                <div class=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"password\" label={t('Password')} error={passwordError} onChange={(event) => setPassword(event.target.value)} type=\"password\" />\r\n                                            <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeatError} onChange={(event) => setPasswordRepeat(event.target.value)} type=\"password\" />\r\n                                            <Input name=\"university\" label={t('University')} error={universityError} onChange={(event) => setUniversity(event.target.value)} />\r\n                                            <Input name=\"branch\" label={t('Branch')} error={branchError} onChange={(event) => setBranch(event.target.value)} />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n\r\n                                {/* İmage choose screen atacanaktır. Profilde alınabilir. */}\r\n\r\n                            </div>\r\n                            <ButtonWithProgress\r\n                                onClick={onClickSignup}\r\n                                disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n                                pendingApiCall={pendingApiCall}\r\n                                text={t('Sign Up')} />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UserSignupPage;\r\n"]},"metadata":{},"sourceType":"module"}