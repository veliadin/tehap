{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\Documents\\\\GitHub\\\\tehap\\\\Tehap_FrontEnd\\\\src\\\\pages\\\\UserSignupPage.js\";\nimport React, { useState } from 'react';\nimport Input from '../components/Input';\nimport { useTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/ButtonWithProgress';\nimport { useApiProgress } from '../shared/ApiProgress';\nimport { useDispatch } from 'react-redux';\nimport { signupHandler } from '../redux/authActions';\nimport '../css/style.css';\n\nconst UserSignupPage = props => {\n  const dispatch = useDispatch();\n  const [proImage, setProImage] = useState();\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    passwordRepeat: null,\n    email: null,\n    usersurname: null,\n    university: null,\n    branch: null,\n    image: null\n  });\n  const [errors, setErrors] = useState({});\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setErrors(previousError => ({ ...previousError,\n      [name]: undefined\n    }));\n    setForm(previousForm => {\n      return { ...previousForm,\n        [name]: value\n      };\n    });\n  };\n\n  const onChangeFile = event => {\n    if (event.target.files.length < 1) {\n      return;\n    }\n\n    console.log(event);\n    const file = event.target.files[0];\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      setProImage(fileReader.result);\n    };\n\n    fileReader.readAsDataURL(file);\n  };\n\n  const onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      history\n    } = props; //signuphandler\n\n    const {\n      push\n    } = history; //signuphandler\n\n    const {\n      username,\n      displayName,\n      password,\n      email,\n      usersurname,\n      university,\n      branch\n    } = form;\n\n    if (proImage) {\n      image = proImage.split(',')[1];\n    }\n\n    console.log(proImage);\n    const body = {\n      username,\n      displayName,\n      password,\n      email,\n      usersurname,\n      university,\n      branch,\n      image\n    };\n\n    try {\n      const response = await dispatch(signupHandler(body));\n      push('/login');\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    username: usernameError,\n    displayName: displayNameError,\n    password: passwordError,\n    passwordRepeat,\n    usersurname: usersurnameError,\n    email: emailError,\n    university: universityError,\n    branch: branchError\n  } = errors;\n  const pendingApiCall = useApiProgress('post', '/api/createuser');\n  let passwordRepeatError;\n\n  if (form.password !== form.passwordRepeat) {\n    passwordRepeatError = t('Password mismatch');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card0 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, t('Sign Up')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card2 card border-0 px-1 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"file\",\n    onChange: onChangeFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" mb-4 px-3 col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    label: t('Username'),\n    error: usernameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"usersurname\",\n    label: t('Surname'),\n    error: usersurnameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"displayName\",\n    label: t('Display Name'),\n    error: displayNameError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"email\",\n    label: t('Email'),\n    error: emailError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 45\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \" mb-4 px-3 col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    label: t('Password'),\n    error: passwordError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"passwordRepeat\",\n    label: t('Password Repeat'),\n    error: passwordRepeatError,\n    onChange: onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"university\",\n    label: t('University'),\n    error: universityError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"branch\",\n    label: t('Branch'),\n    error: branchError,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 45\n    }\n  }))))), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickSignup,\n    disabled: pendingApiCall || passwordRepeatError !== undefined,\n    pendingApiCall: pendingApiCall,\n    text: t('Sign Up'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default UserSignupPage;","map":{"version":3,"sources":["C:/Users/adinv/Documents/GitHub/tehap/Tehap_FrontEnd/src/pages/UserSignupPage.js"],"names":["React","useState","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","signupHandler","UserSignupPage","props","dispatch","proImage","setProImage","form","setForm","username","displayName","password","passwordRepeat","email","usersurname","university","branch","image","errors","setErrors","onChange","event","name","value","target","previousError","undefined","previousForm","onChangeFile","files","length","console","log","file","fileReader","FileReader","onloadend","result","readAsDataURL","onClickSignup","preventDefault","history","push","split","body","response","error","data","validationErrors","t","usernameError","displayNameError","passwordError","usersurnameError","emailError","universityError","branchError","pendingApiCall","passwordRepeatError"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/Input'\r\nimport { useTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/ButtonWithProgress';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\nimport '../css/style.css';\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const [proImage, setProImage] = useState();\r\n\r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        passwordRepeat: null,\r\n        email: null,\r\n        usersurname: null,\r\n        university: null,\r\n        branch: null,\r\n        image: null,\r\n    })\r\n    const [errors, setErrors] = useState({});\r\n\r\n    const onChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setErrors((previousError) => ({ ...previousError, [name]: undefined }));\r\n\r\n        setForm((previousForm) => {\r\n            return {\r\n                ...previousForm,\r\n                [name]: value\r\n            }\r\n        });\r\n    };\r\n\r\n    const onChangeFile = (event) => {\r\n        if (event.target.files.length < 1) {\r\n            return;\r\n        }\r\n        console.log(event);\r\n        const file = event.target.files[0];\r\n        const fileReader = new FileReader();\r\n        fileReader.onloadend = () => {\r\n            setProImage(fileReader.result);\r\n        }\r\n        fileReader.readAsDataURL(file);\r\n    }\r\n\r\n    const onClickSignup = async event => {\r\n        event.preventDefault();\r\n        const { history } = props; //signuphandler\r\n        const { push } = history; //signuphandler\r\n        const { username, displayName, password, email, usersurname, university, branch } = form;\r\n\r\n        if (proImage) {\r\n            image = proImage.split(',')[1];\r\n        }\r\n        console.log(proImage);\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password,\r\n            email,\r\n            usersurname,\r\n            university,\r\n            branch,\r\n            image,\r\n        }\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                setErrors(error.response.data.validationErrors);\r\n            }\r\n        }\r\n    };\r\n    const { t } = useTranslation();\r\n    const { username: usernameError, displayName: displayNameError, password: passwordError, passwordRepeat, usersurname: usersurnameError, email: emailError, university: universityError, branch: branchError } = errors;\r\n    const pendingApiCall = useApiProgress('post', '/api/createuser');\r\n\r\n    let passwordRepeatError;\r\n    if (form.password !== form.passwordRepeat) {\r\n        passwordRepeatError = t('Password mismatch');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\">\r\n            <div className=\"card card0 border-0\">\r\n                <div className=\"row d-flex\">\r\n                    <div className=\"col-lg-2\">\r\n                    </div>\r\n                    <div className=\"col-lg-8\">\r\n                        <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                        <div className=\"card2 card border-0 px-1 py-3\">\r\n                            <Input type=\"file\" onChange={onChangeFile} />\r\n                            <div className=\"row\">\r\n                                <div className=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"username\" label={t('Username')} error={usernameError} onChange={onChange} />\r\n                                            <Input name=\"usersurname\" label={t('Surname')} error={usersurnameError} onChange={onChange} />\r\n                                            <Input name=\"displayName\" label={t('Display Name')} error={displayNameError} onChange={onChange} />\r\n                                            <Input name=\"email\" label={t('Email')} error={emailError} onChange={onChange} />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                                <div className=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"password\" label={t('Password')} error={passwordError} onChange={onChange} type=\"password\" />\r\n                                            <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeatError} onChange={onChange} type=\"password\" />\r\n                                            <Input name=\"university\" label={t('University')} error={universityError} onChange={onChange} />\r\n                                            <Input name=\"branch\" label={t('Branch')} error={branchError} onChange={onChange} />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <ButtonWithProgress\r\n                                onClick={onClickSignup}\r\n                                disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n                                pendingApiCall={pendingApiCall}\r\n                                text={t('Sign Up')} />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"col-lg-2\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UserSignupPage;\r\n"]},"metadata":{},"sourceType":"module"}