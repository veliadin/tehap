{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\JsProjects\\\\Tehap_FrontEnd\\\\Tehap_FrontEnd\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Input from'../components/Input';import{useTranslation}from'react-i18next';import ButtonWithProgress from'../components/ButtonWithProgress';import{useApiProgress}from'../shared/ApiProgress';import{useDispatch}from'react-redux';import{signupHandler}from'../redux/authActions';import'../css/style.css';var UserSignupPage=function UserSignupPage(props){var dispatch=useDispatch();var _useState=useState({username:null,displayName:null,password:null,passwordRepeat:null,email:null,usersurname:null,university:null,branch:null}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var onChange=function onChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setErrors(function(previousError){return _objectSpread(_objectSpread({},previousError),{},_defineProperty({},name,undefined));});setForm(function(previousForm){return _objectSpread(_objectSpread({},previousForm),{},_defineProperty({},name,value));});};var onClickSignup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var history,push,username,displayName,password,email,usersurname,university,branch,body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();history=props.history;//signuphandler\npush=history.push;//signup handler\nusername=form.username,displayName=form.displayName,password=form.password,email=form.email,usersurname=form.usersurname,university=form.university,branch=form.branch;body={username:username,displayName:displayName,password:password,email:email,usersurname:usersurname,university:university,branch:branch};_context.prev=5;_context.next=8;return dispatch(signupHandler(body));case 8:response=_context.sent;push('/login');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);if(_context.t0.response.data.validationErrors){setErrors(_context.t0.response.data.validationErrors);}case 15:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function onClickSignup(_x){return _ref.apply(this,arguments);};}();var _useTranslation=useTranslation(),t=_useTranslation.t;var usernameError=errors.username,displayNameError=errors.displayName,passwordError=errors.password,passwordRepeat=errors.passwordRepeat,usersurnameError=errors.usersurname,emailError=errors.email,universityError=errors.university,branchError=errors.branch;var pendingApiCall=useApiProgress('post','/api/createuser');var passwordRepeatError;if(form.password!==form.passwordRepeat){passwordRepeatError=t('Password mismatch');}return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card0 border-0\"},/*#__PURE__*/React.createElement(\"div\",{class:\"row d-flex\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-2\"}),/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-8\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center\"},t('Sign Up')),/*#__PURE__*/React.createElement(\"div\",{class:\"card2 card border-0 px-1 py-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{class:\" mb-4 px-3 col-lg-6\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(Input,{name:\"username\",label:t('Username'),error:usernameError,onChange:onChange}),/*#__PURE__*/React.createElement(Input,{name:\"usersurname\",label:t('User Surname'),error:usersurnameError,onChange:onChange}),/*#__PURE__*/React.createElement(Input,{name:\"password\",label:t('Password'),error:passwordError,onChange:onChange,type:\"password\"}),/*#__PURE__*/React.createElement(Input,{name:\"passwordRepeat\",label:t('Password Repeat'),error:passwordRepeatError,onChange:onChange,type:\"password\"})))),/*#__PURE__*/React.createElement(\"div\",{class:\" mb-4 px-3 col-lg-6\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(Input,{name:\"email\",label:t('Email'),error:emailError,onChange:onChange}),/*#__PURE__*/React.createElement(Input,{name:\"displayName\",label:t('Display Name'),error:displayNameError,onChange:onChange}),/*#__PURE__*/React.createElement(Input,{name:\"university\",label:t('University'),error:universityError,onChange:onChange}),/*#__PURE__*/React.createElement(Input,{name:\"branch\",label:t('Branch'),error:branchError,onChange:onChange}))))),/*#__PURE__*/React.createElement(ButtonWithProgress,{onClick:onClickSignup,disabled:pendingApiCall||passwordRepeatError!==undefined,pendingApiCall:pendingApiCall,text:t('Sign Up')}))),/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-2\"}))));};export default UserSignupPage;","map":{"version":3,"sources":["D:/JsProjects/Tehap_FrontEnd/Tehap_FrontEnd/src/pages/UserSignupPage.js"],"names":["React","useState","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","signupHandler","UserSignupPage","props","dispatch","username","displayName","password","passwordRepeat","email","usersurname","university","branch","form","setForm","errors","setErrors","onChange","event","target","name","value","previousError","undefined","previousForm","onClickSignup","preventDefault","history","push","body","response","data","validationErrors","t","usernameError","displayNameError","passwordError","usersurnameError","emailError","universityError","branchError","pendingApiCall","passwordRepeatError"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/Input'\r\nimport { useTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/ButtonWithProgress';\r\nimport { useApiProgress } from '../shared/ApiProgress';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\nimport '../css/style.css';\r\n\r\nconst UserSignupPage = (props) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [form, setForm] = useState({\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        passwordRepeat: null,\r\n\r\n        email: null,\r\n        usersurname: null,\r\n        university: null,\r\n        branch: null,\r\n\r\n    })\r\n    const [errors, setErrors] = useState({});\r\n\r\n\r\n    const onChange = event => {\r\n        const { name, value } = event.target;\r\n\r\n        setErrors((previousError) => ({ ...previousError, [name]: undefined }));\r\n\r\n        setForm((previousForm) => {\r\n            return {\r\n                ...previousForm,\r\n                [name]: value\r\n            }\r\n        });\r\n    };\r\n\r\n    const onClickSignup = async event => {\r\n        event.preventDefault();\r\n\r\n        const { history } = props; //signuphandler\r\n        const { push } = history; //signup handler\r\n        const { username, displayName, password, email, usersurname, university, branch } = form;\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password,\r\n            email,\r\n            usersurname,\r\n            university,\r\n            branch\r\n        }\r\n\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                setErrors(error.response.data.validationErrors);\r\n            }\r\n        }\r\n\r\n    };\r\n    const { t } = useTranslation();\r\n    const { username: usernameError, displayName: displayNameError, password: passwordError, passwordRepeat, usersurname: usersurnameError, email: emailError, university: universityError, branch: branchError } = errors;\r\n    const pendingApiCall = useApiProgress('post', '/api/createuser');\r\n\r\n    let passwordRepeatError;\r\n    if (form.password !== form.passwordRepeat) {\r\n        passwordRepeatError = t('Password mismatch');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-1 px-md-5 px-lg-1 px-xl-5 py-5 mx-auto\">\r\n            <div className=\"card card0 border-0\">\r\n                <div class=\"row d-flex\">\r\n\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n\r\n                    <div class=\"col-lg-8\">\r\n                        <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                        <div class=\"card2 card border-0 px-1 py-3\">\r\n                            <div className=\"row\">\r\n                                <div class=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"username\" label={t('Username')} error={usernameError} onChange={onChange} />\r\n                                            <Input name=\"usersurname\" label={t('User Surname')} error={usersurnameError} onChange={onChange} />\r\n                                            <Input name=\"password\" label={t('Password')} error={passwordError} onChange={onChange} type=\"password\" />\r\n                                            <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeatError} onChange={onChange} type=\"password\" />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                                <div class=\" mb-4 px-3 col-lg-6\">\r\n                                    <form>\r\n                                        <div className=\"form-group\">\r\n                                            <Input name=\"email\" label={t('Email')} error={emailError} onChange={onChange} />\r\n                                            <Input name=\"displayName\" label={t('Display Name')} error={displayNameError} onChange={onChange} />\r\n                                            <Input name=\"university\" label={t('University')} error={universityError} onChange={onChange} />\r\n                                            <Input name=\"branch\" label={t('Branch')} error={branchError} onChange={onChange} />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <ButtonWithProgress\r\n                                onClick={onClickSignup}\r\n                                disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n                                pendingApiCall={pendingApiCall}\r\n                                text={t('Sign Up')} />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"col-lg-2\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UserSignupPage;\r\n"]},"metadata":{},"sourceType":"module"}