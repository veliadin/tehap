{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\FrontEnd Projects\\\\AppStater_v01\\\\src\\\\pages\\\\UserLoginPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport Input from '../components/input';\nimport { useTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/buttonWithProgres';\nimport { useApiProgress } from '../shared/ApiProgress';\nimport { useDispatch } from 'react-redux';\nimport { loginHandler } from '../redux/authActions';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\n\nconst UserLoginPage = props => {\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n  const dispatch = useDispatch();\n  /* const [socialMediaLogin, setSocialLogin] = useState({\r\n       Name: null,\r\n       email: null,\r\n       token: null,\r\n       image: null,\r\n   });*/\n\n  signupwithGoogle = res => {\n    const googleresponse = {\n      Name: res.profileObj.name,\n      email: res.profileObj.email,\n      token: res.googleId,\n      Image: res.profileObj.imageUrl,\n      ProviderId: 'Google'\n    };\n    debugger;\n    dispatch(loginHandler(creds)).then(result => {\n      let responseJson = result;\n      sessionStorage.setItem(\"userData\", JSON.stringify(result));\n      this.props.history.push('/');\n    });\n  };\n\n  useEffect(() => {\n    // username veya password'da bir değişim olduğunda, errorlar undefined oluyor.\n    setError(undefined);\n  }, [username, password]);\n\n  const onClickLogin = async event => {\n    event.preventDefault();\n    const creds = {\n      username,\n      password\n    };\n    const {\n      history\n    } = props;\n    const {\n      push\n    } = history;\n    setError(undefined);\n\n    try {\n      await dispatch(loginHandler(creds));\n      push('/');\n    } catch (apiError) {\n      setError(apiError.response.data.message);\n    }\n  };\n\n  const componentClicked = data => {\n    console.log(\"data\", data);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n  };\n\n  const responseGoogle = response => {\n    console.log(response);\n  };\n\n  const {\n    t\n  } = useTranslation();\n  const pendingApiCall = useApiProgress('/api/auth');\n  const buttonEnabled = username && password;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, t('Login')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-label-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: t('Username'),\n    onChange: event => setUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: t('Password'),\n    type: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 31\n    }\n  }, error), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickLogin,\n    disabled: !buttonEnabled || pendingApiCall,\n    pendingApiCall: pendingApiCall,\n    text: t('Login'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: \"2978237078953063\",\n    fields: \"name,email,picture\",\n    onClick: componentClicked,\n    callback: responseFacebook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\",\n    buttonText: \"Login\",\n    onSuccess: responseGoogle,\n    onFailure: responseGoogle,\n    cookiePolicy: 'single_host_origin',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default UserLoginPage;","map":{"version":3,"sources":["C:/Users/adinv/FrontEnd Projects/AppStater_v01/src/pages/UserLoginPage.js"],"names":["React","useState","useEffect","Input","useTranslation","ButtonWithProgress","useApiProgress","useDispatch","loginHandler","GoogleLogin","FacebookLogin","UserLoginPage","props","username","setUsername","password","setPassword","error","setError","dispatch","signupwithGoogle","res","googleresponse","Name","profileObj","name","email","token","googleId","Image","imageUrl","ProviderId","creds","then","result","responseJson","sessionStorage","setItem","JSON","stringify","history","push","undefined","onClickLogin","event","preventDefault","apiError","response","data","message","componentClicked","console","log","responseFacebook","responseGoogle","t","pendingApiCall","buttonEnabled","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Input from '../components/input'\r\nimport { useTranslation } from 'react-i18next'\r\nimport ButtonWithProgress from '../components/buttonWithProgres';\r\nimport { useApiProgress } from '../shared/ApiProgress'\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginHandler } from '../redux/authActions';\r\nimport GoogleLogin from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\n\r\nconst UserLoginPage = (props) => {\r\n    const [username, setUsername] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n    const dispatch = useDispatch();\r\n\r\n    /* const [socialMediaLogin, setSocialLogin] = useState({\r\n         Name: null,\r\n         email: null,\r\n         token: null,\r\n         image: null,\r\n     });*/\r\n\r\n    signupwithGoogle = (res) => {\r\n        const googleresponse = {\r\n        Name: res.profileObj.name,\r\n        email: res.profileObj.email,\r\n        token: res.googleId,\r\n        Image: res.profileObj.imageUrl,\r\n        ProviderId: 'Google'\r\n      };\r\n        debugger;\r\n        dispatch(loginHandler(creds))\r\n            .then((result) => {\r\n                let responseJson = result;\r\n                sessionStorage.setItem(\"userData\", JSON.stringify(result));\r\n                this.props.history.push('/')\r\n            });\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => { // username veya password'da bir değişim olduğunda, errorlar undefined oluyor.\r\n        setError(undefined);\r\n    }, [username, password])\r\n\r\n    const onClickLogin = async event => {\r\n        event.preventDefault();\r\n        const creds = {\r\n            username,\r\n            password\r\n        };\r\n        const { history } = props;\r\n        const { push } = history;\r\n\r\n        setError(undefined);\r\n        try {\r\n            await dispatch(loginHandler(creds));\r\n            push('/')\r\n        } catch (apiError) {\r\n            setError(apiError.response.data.message);\r\n        }\r\n    };\r\n\r\n    const componentClicked = data => {\r\n        console.log(\"data\", data);\r\n    };\r\n\r\n    const responseFacebook = response => {\r\n        console.log(response);\r\n    };\r\n\r\n    const responseGoogle = (response) => {\r\n        console.log(response);\r\n    };\r\n\r\n    const { t } = useTranslation();\r\n    const pendingApiCall = useApiProgress('/api/auth');\r\n    const buttonEnabled = username && password;\r\n    return (\r\n        <div className=\"container\">\r\n            <form>\r\n                <h1 className=\"text-center\">{t('Login')}</h1>\r\n                <div className=\"form-label-group\">\r\n                    <Input label={t('Username')} onChange={event => setUsername(event.target.value)} />\r\n                    <Input label={t('Password')} type=\"password\" onChange={event => setPassword(event.target.value)} />\r\n                    {error && <div className=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n                    <ButtonWithProgress\r\n                        onClick={onClickLogin}\r\n                        disabled={!buttonEnabled || pendingApiCall}\r\n                        pendingApiCall={pendingApiCall}\r\n                        text={t('Login')} />\r\n\r\n\r\n                </div>\r\n                <FacebookLogin\r\n                    appId=\"2978237078953063\"\r\n                    fields=\"name,email,picture\"\r\n                    onClick={componentClicked}\r\n                    callback={responseFacebook} />\r\n                <GoogleLogin\r\n                    clientId=\"181124231251-7hfpmban9e79jkgllfph3rnp0i8o6t27.apps.googleusercontent.com\"\r\n                    buttonText=\"Login\"\r\n                    onSuccess={responseGoogle}\r\n                    onFailure={responseGoogle}\r\n                    cookiePolicy={'single_host_origin'}\r\n                />\r\n            </form>\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default UserLoginPage;"]},"metadata":{},"sourceType":"module"}