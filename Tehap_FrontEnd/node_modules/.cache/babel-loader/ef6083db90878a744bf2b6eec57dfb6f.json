{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\FrontEnd Projects\\\\AppStater_v01\\\\src\\\\pages\\\\UserSignupPage.js\";\nimport React from 'react';\nimport Input from '../components/input';\nimport { withTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/buttonWithProgres';\nimport { withApiProgress } from '../shared/ApiProgress';\nimport { connect } from 'react-redux';\nimport { signupHandler } from '../redux/authActions';\n\nconst UserSignupPage = event => {\n  state = {\n    username: null,\n    displayName: null,\n    password: null,\n    passwordRepeat: null,\n    errors: {}\n  };\n\n  onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    const errors = { ...this.state.errors\n    };\n    const {\n      t\n    } = this.props;\n    errors[name] = undefined;\n\n    if (name === 'password' || name === 'passwordRepeat') {\n      if (name === 'password' && value !== this.state.passwordRepeat) {\n        errors.passwordRepeat = t('Password mismatch');\n      } else if (name === 'passwordRepeat' && value !== this.state.password) {\n        errors.passwordRepeat = t('Password mismatch');\n      } else {\n        errors.passwordRepeat = undefined;\n      }\n    }\n\n    this.setState({\n      [name]: value,\n      errors\n    });\n  };\n\n  onClickSignup = async event => {\n    event.preventDefault();\n    const {\n      history,\n      dispatch\n    } = this.props; //signuphandler\n\n    const {\n      push\n    } = history; //signup handler\n\n    const {\n      username,\n      displayName,\n      password\n    } = this.state;\n    const body = {\n      username,\n      displayName,\n      password\n    };\n\n    try {\n      const response = await dispatch(signupHandler(body));\n      push('/login');\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        this.setState({\n          errors: error.response.data.validationErrors\n        });\n      }\n    }\n  };\n\n  const {\n    errors\n  } = this.state;\n  const {\n    username,\n    displayName,\n    password,\n    passwordRepeat\n  } = errors;\n  const {\n    t,\n    pendingApiCall\n  } = this.props;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, t('Sign Up')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    label: t('Username'),\n    error: username,\n    onChange: this.onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"displayName\",\n    label: t('Display Name'),\n    error: displayName,\n    onChange: this.onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    label: t('Password'),\n    error: password,\n    onChange: this.onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: \"passwordRepeat\",\n    label: t('Password Repeat'),\n    error: passwordRepeat,\n    onChange: this.onChange,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: this.onClickSignup,\n    disabled: pendingApiCall || passwordRepeat !== undefined,\n    pendingApiCall: pendingApiCall,\n    text: t('Sign Up'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage, '/api/createuser');\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPageWithApiProgress);\nexport default connect()(UserSignupPageWithTranslation);","map":{"version":3,"sources":["C:/Users/adinv/FrontEnd Projects/AppStater_v01/src/pages/UserSignupPage.js"],"names":["React","Input","withTranslation","ButtonWithProgress","withApiProgress","connect","signupHandler","UserSignupPage","event","state","username","displayName","password","passwordRepeat","errors","onChange","name","value","target","t","props","undefined","setState","onClickSignup","preventDefault","history","dispatch","push","body","response","error","data","validationErrors","pendingApiCall","UserSignupPageWithApiProgress","UserSignupPageWithTranslation"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Input from '../components/input'\r\nimport { withTranslation } from 'react-i18next';\r\nimport ButtonWithProgress from '../components/buttonWithProgres';\r\nimport { withApiProgress } from '../shared/ApiProgress';\r\nimport { connect } from 'react-redux';\r\nimport { signupHandler } from '../redux/authActions';\r\n\r\n\r\nconst UserSignupPage = (event => {\r\n\r\n    state = {\r\n        username: null,\r\n        displayName: null,\r\n        password: null,\r\n        passwordRepeat: null,\r\n        errors: {}\r\n    };\r\n\r\n    onChange = event => {\r\n        const { name, value } = event.target;\r\n        const errors = { ...this.state.errors }\r\n        const { t } = this.props;\r\n        errors[name] = undefined;\r\n        if (name === 'password' || name === 'passwordRepeat') {\r\n            if (name === 'password' && value !== this.state.passwordRepeat) {\r\n                errors.passwordRepeat = t('Password mismatch');\r\n            } else if (name === 'passwordRepeat' && value !== this.state.password) {\r\n                errors.passwordRepeat = t('Password mismatch');\r\n            }\r\n            else {\r\n                errors.passwordRepeat = undefined;\r\n            }\r\n        }\r\n        this.setState({\r\n            [name]: value,\r\n            errors\r\n        });\r\n    };\r\n\r\n    onClickSignup = async event => {\r\n        event.preventDefault();\r\n\r\n        const { history, dispatch } = this.props; //signuphandler\r\n        const { push } = history; //signup handler\r\n        const { username, displayName, password } = this.state;\r\n        const body = {\r\n            username,\r\n            displayName,\r\n            password\r\n        }\r\n\r\n        try {\r\n            const response = await dispatch(signupHandler(body));\r\n            push('/login');\r\n        } catch (error) {\r\n            if (error.response.data.validationErrors) {\r\n                this.setState({ errors: error.response.data.validationErrors });\r\n            }\r\n        }\r\n\r\n    };\r\n    const { errors } = this.state;\r\n    const { username, displayName, password, passwordRepeat } = errors;\r\n    const { t, pendingApiCall } = this.props;\r\n    return (\r\n\r\n        <div className=\"container\">\r\n            <form>\r\n                <h1 className=\"text-center\">{t('Sign Up')}</h1>\r\n                <div className=\"form-group\">\r\n                    <Input name=\"username\" label={t('Username')} error={username} onChange={this.onChange} />\r\n                    <Input name=\"displayName\" label={t('Display Name')} error={displayName} onChange={this.onChange} />\r\n                    <Input name=\"password\" label={t('Password')} error={password} onChange={this.onChange} type=\"password\" />\r\n                    <Input name=\"passwordRepeat\" label={t('Password Repeat')} error={passwordRepeat} onChange={this.onChange} type=\"password\" />\r\n                    <ButtonWithProgress\r\n                        onClick={this.onClickSignup}\r\n                        disabled={pendingApiCall || passwordRepeat !== undefined}\r\n                        pendingApiCall={pendingApiCall}\r\n                        text={t('Sign Up')} />\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n})\r\n\r\n\r\nconst UserSignupPageWithApiProgress = withApiProgress(UserSignupPage, '/api/createuser');\r\nconst UserSignupPageWithTranslation = withTranslation()(UserSignupPageWithApiProgress);\r\nexport default connect()(UserSignupPageWithTranslation);\r\n"]},"metadata":{},"sourceType":"module"}