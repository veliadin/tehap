{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adinv\\\\FrontEnd Projects\\\\AppStater_v01\\\\src\\\\pages\\\\UserLoginPage.js\";\nimport React, { useState } from 'react';\nimport Input from '../components/input';\nimport { withTranslation } from 'react-i18next';\nimport ButtonWithProgress from '../components/buttonWithProgres';\nimport { withApiProgress } from '../shared/ApiProgress';\nimport { connect } from 'react-redux';\nimport { loginHandler } from '../redux/authActions'; //import { Authentication } from '../shared/AuthenticationContext'\n\nconst UserLoginPage = props => {\n  //static contextType = Authentication;\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  /* state = {\r\n       username: null,\r\n       password: null,\r\n       error: null\r\n   };*/\n\n  const onClickLogin = async event => {\n    event.preventDefault(); //const { username, password } = this.state;\n\n    const creds = {\n      username,\n      password\n    };\n    const {\n      history,\n      dispatch\n    } = props;\n    const {\n      push\n    } = history;\n    /*this.setState({\r\n        error: null\r\n    });*/\n\n    try {\n      await dispatch(loginHandler(creds));\n      push('/');\n    } catch (apiError) {\n      this.setState({\n        error: apiError.response.data.message\n      });\n    }\n  };\n\n  const {\n    t,\n    pendingApiCall\n  } = props;\n  let error = undefined;\n  const buttonEnabled = username && password;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, t('Login')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-label-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: t('Username'),\n    onChange: event => setUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: t('Password'),\n    type: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }), error && /*#__PURE__*/React.createElement(\"div\", {\n    class: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 31\n    }\n  }, error), /*#__PURE__*/React.createElement(ButtonWithProgress, {\n    onClick: onClickLogin,\n    disabled: !buttonEnabled || pendingApiCall,\n    pendingApiCall: pendingApiCall,\n    text: t('Login'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst LoginPageWithTransation = withTranslation()(UserLoginPage);\n/*const mapDispatchToProps = dispatch => {\r\n    return {\r\n                        onLoginSuccess: authState => {\r\n            return dispatch(loginSuccess(authState));\r\n        }\r\n    };\r\n};*/\n\nexport default connect()(withApiProgress(LoginPageWithTransation, '/api/auth'));","map":{"version":3,"sources":["C:/Users/adinv/FrontEnd Projects/AppStater_v01/src/pages/UserLoginPage.js"],"names":["React","useState","Input","withTranslation","ButtonWithProgress","withApiProgress","connect","loginHandler","UserLoginPage","props","username","setUsername","password","setPassword","onClickLogin","event","preventDefault","creds","history","dispatch","push","apiError","setState","error","response","data","message","t","pendingApiCall","undefined","buttonEnabled","target","value","LoginPageWithTransation"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Input from '../components/input'\r\nimport { withTranslation } from 'react-i18next'\r\nimport ButtonWithProgress from '../components/buttonWithProgres';\r\nimport { withApiProgress } from '../shared/ApiProgress'\r\nimport { connect } from 'react-redux';\r\nimport { loginHandler } from '../redux/authActions';\r\n//import { Authentication } from '../shared/AuthenticationContext'\r\n\r\nconst UserLoginPage = (props) => {\r\n\r\n    //static contextType = Authentication;\r\n\r\n    const [username, setUsername] = useState();\r\n    const [password, setPassword] = useState();\r\n    /* state = {\r\n         username: null,\r\n         password: null,\r\n         error: null\r\n     };*/\r\n\r\n    const onClickLogin = async event => {\r\n        event.preventDefault();\r\n        //const { username, password } = this.state;\r\n        const creds = {\r\n            username,\r\n            password\r\n        };\r\n\r\n        const { history, dispatch } = props;\r\n        const { push } = history;\r\n\r\n        /*this.setState({\r\n            error: null\r\n        });*/\r\n\r\n        try {\r\n            await dispatch(loginHandler(creds));\r\n            push('/')\r\n        } catch (apiError) {\r\n            this.setState({\r\n                error: apiError.response.data.message\r\n            })\r\n        }\r\n    };\r\n    const { t, pendingApiCall } = props;\r\n    let error = undefined;\r\n    const buttonEnabled = username && password;\r\n    return (\r\n        <div className=\"container\">\r\n            <form>\r\n                <h1 className=\"text-center\">{t('Login')}</h1>\r\n                <div className=\"form-label-group\">\r\n                    <Input label={t('Username')} onChange={event => setUsername(event.target.value) } />\r\n                    <Input label={t('Password')} type=\"password\" onChange={event => setPassword(event.target.value) } />\r\n                    {error && <div class=\"alert alert-danger\" role=\"alert\">{error}</div>}\r\n                    <ButtonWithProgress\r\n                        onClick={onClickLogin}\r\n                        disabled={!buttonEnabled || pendingApiCall}\r\n                        pendingApiCall={pendingApiCall}\r\n                        text={t('Login')} />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst LoginPageWithTransation = withTranslation()(UserLoginPage);\r\n\r\n/*const mapDispatchToProps = dispatch => {\r\n    return {\r\n                        onLoginSuccess: authState => {\r\n            return dispatch(loginSuccess(authState));\r\n        }\r\n    };\r\n};*/\r\n\r\nexport default connect()(withApiProgress(LoginPageWithTransation, '/api/auth'));"]},"metadata":{},"sourceType":"module"}